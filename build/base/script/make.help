#!/bin/sh

# make.help
# =========
# Author R.J.Barnes
#
# Purpose: 
# 
# Constructs help messages from XML documentation 
#
# Syntax:
#
# make.help module
#
# Description:
#
# Constructs help messages from XML documentation 

help=${BUILD}/base/help

hlpcfg="${help}/cfg/help.cfg.xml"
errcfg="${help}/cfg/error.cfg.xml"

hlpdft="${help}/include/hlpstr.h"
errdft="${help}/include/errstr.h"


doclist=`find . -name "*.doc.xml"`
if test ! -n "${doclist}"
then
   cat ${hlpdft} > hlpstr.h
   cat ${errdft} > errstr.h
   exit
fi

for doc in ${doclist}
do
  echo ${doc}
  rm -f ${module}/hlpstr.h
  rm -f ${module}/errstr.h
  if test -s ${BUILD}/base/bin/xmldoc
  then
   
    ${BUILD}/base/bin/xmldoc -ilf ${help} ${hlpcfg} ${doc} \
                       > hlpstr.h

    ${BUILD}/base/bin/xmldoc -ilf ${help} ${errcfg} ${doc} \
                       > errstr.h
  else
     cat ${hlpdft} > hlpstr.h
     cat ${errdft} > errstr.h
  fi

done


